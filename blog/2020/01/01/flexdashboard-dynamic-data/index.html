<!DOCTYPE html>
<html lang="en"
      xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Language" content="en">

    <meta name="author" content="Shagun Jhaver">
    <meta name="description" content="Use R Markdown, flexdashboard, and Shiny to create a dashboard that automatically loads data from a Google Sheet">
    <meta name="keywords" content="rmarkdown, shiny, r, google sheets">
    <meta name="generator" content="Hugo 0.88.1" />

    <title>
  Create a dynamic dashboard with R, flexdashboard, and Shiny | Shagun Jhaver
</title>

    <link rel="canonical" href="https://www.shagunjhaver.com/blog/2020/01/01/flexdashboard-dynamic-data/">
    <link rel="alternate" type="application/atom+xml" title="Blog Posts" href="https://www.shagunjhaver.com/atom.xml">
    <link rel="alternate" type="application/json" title="JSON Feed" href="https://www.shagunjhaver.com/feed.json">

    <link rel="openid2.provider" href="https://www.google.com/accounts/o8/ud?source=profiles">
    <link rel="openid2.local_id" href="https://www.google.com/profiles/andrewheiss">

    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:image" content="https://www.shagunjhaver.com/blog/2020/01/01/flexdashboard-dynamic-data/shiny.png"/>
    <meta name="twitter:site" content="@shagunjhaver"/>
    <meta name="twitter:title" content="Create a dynamic dashboard with R, flexdashboard, and Shiny"/>
    <meta name="twitter:creator" content="@shagunjhaver"/>
    <meta name="twitter:description" content="Use R Markdown, flexdashboard, and Shiny to create a dashboard that automatically loads data from a Google Sheet"/>


    <meta property="og:title" content="Create a dynamic dashboard with R, flexdashboard, and Shiny" />
<meta property="og:description" content="Use R Markdown, flexdashboard, and Shiny to create a dashboard that automatically loads data from a Google Sheet" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.shagunjhaver.com/blog/2020/01/01/flexdashboard-dynamic-data/" />
<meta property="og:image" content="https://www.shagunjhaver.com/blog/2020/01/01/flexdashboard-dynamic-data/shiny.png" />
<meta property="article:published_time" content="2020-01-01T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-01-01T00:00:00+00:00" />

<meta property="article:author" content="https://www.facebook.com/shagun.jhaver" />
<meta property="article:publisher" content="https://www.facebook.com/shagun.jhaver" />
<meta property="article:section" content="blog" />
<meta property="article:tag" content="rmarkdown" />
<meta property="article:tag" content="shiny" />
<meta property="article:tag" content="r" />
<meta property="article:tag" content="google sheets" />


    <meta itemprop="name" content="Create a dynamic dashboard with R, flexdashboard, and Shiny">
<meta itemprop="description" content="Use R Markdown, flexdashboard, and Shiny to create a dashboard that automatically loads data from a Google Sheet"><meta itemprop="datePublished" content="2020-01-01T00:00:00+00:00" />
<meta itemprop="dateModified" content="2020-01-01T00:00:00+00:00" />
<meta itemprop="wordCount" content="1108"><meta itemprop="image" content="https://www.shagunjhaver.com/blog/2020/01/01/flexdashboard-dynamic-data/shiny.png">
<meta itemprop="keywords" content="rmarkdown,shiny,r,google sheets," />

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@100..900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400;1,700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="/css/pure-and-grids-responsive.min.css">
    <link rel="stylesheet" href="/css/ath-hugo.min.fd8cb76e3e71e1679716940ae61a1383ae9edd503b072df4bc3f709182421c76.css" integrity="sha256-/Yy3bj5x4WeXFpQK5hoTg66e3VA7By30vD9wkYJCHHY=" crossorigin="anonymous" media="screen" />

    <script src="https://kit.fontawesome.com/f9d343c40d.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">    

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v=dLX2MbQJLG">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png?v=dLX2MbQJLG">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png?v=dLX2MbQJLG">
    <link rel="manifest" href="/site.webmanifest?v=dLX2MbQJLG">
    <link rel="mask-icon" href="/safari-pinned-tab.svg?v=dLX2MbQJLG" color="#cf4446">
    <link rel="shortcut icon" href="/favicon.ico?v=dLX2MbQJLG">
    <meta name="msapplication-TileColor" content="#170c3a">
    <meta name="theme-color" content="#170c3a">

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-527449-5', 'auto');
      ga('send', 'pageview');
    </script>
</head>

<body>

    <div id="layout" class="pure-g">
        <div id="sidebar" class="pure-u-1 pure-u-md-1-4">
            <header>
                <h1 class="title"><a href="/">Shagun Jhaver</a></h1>
                <h2 class="minibio">Social computing, CSCW, HCI, content moderation, and online harassment</h2>

                <nav id="main-nav">
                    <ul class="nav-list">
                        <li class="nav-item">
                            <a class="nav-link" href="/">About</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/cv/">CV</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/research/">Research</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/news/">News</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/now/">Now</a>
                        </li>
                    </ul>
                </nav>
            </header>

        </div> 
    
        <div id="content" class="pure-u-1 pure-u-md-3-4">
        
  <section>
    <article class="content-single">
        <header class="post-header">
            <h1 class="post-title">Create a dynamic dashboard with R, flexdashboard, and Shiny</h1>

            <div class="post-meta pure-g">
                <div class="pure-u-1-2">
                    <span class="posted-on">
                        <i class="far fa-calendar-alt" aria-hidden="true"></i>
                        <time datetime='2020-01-01T00:00:00Z'>
                            Wednesday, January 1, 2020
                        </time>
                    </span>
                </div>
                <div class="reading-time pure-u-1-2">
                    <i class="far fa-clock" aria-hidden="true"></i>
                    6-minute read
                </div>
            </div>
        </header>
    
        <p>Now that I&rsquo;m on the tenure track, I&rsquo;ve been looking for a way to keep track of my different research projects so I can get them all finished and published. <a href="https://doi.org/10.1017/S1049096516000160">Matt Lebo&rsquo;s &ldquo;Managing Your Research Pipeline&rdquo;</a> presents a neat way of quantifying and tracking the progress of your research, and I recently adopted it for my own stuff. I even made a fancy <a href="https://rmarkdown.rstudio.com/">R Markdown</a> + <a href="https://rmarkdown.rstudio.com/flexdashboard/"><strong>flexdashboard</strong></a> <a href="https://twitter.com/andrewheiss/status/1201892963451842562">dashboard to show the status of the pipeline</a> interactively. I manage the data for the dashboard in a Google Sheet, knit the dashboard, and create an HTML file with the latest statistics.</p>
<p>The combination of <a href="https://rmarkdown.rstudio.com/">R Markdown</a> + <a href="https://rmarkdown.rstudio.com/flexdashboard/"><strong>flexdashboard</strong></a> + <a href="https://plot.ly/ggplot2/"><strong>ggplotly</strong></a> makes it incredibly easy to create interactive dashboards, but you have to reknit and recompile the dashboard any time any data changes, which I&rsquo;m not a fan of doing. Wouldn&rsquo;t it be amazing if there was a way to get the latest data into a dashboard document without any reknitting?</p>
<p>Fortunately there <em>is</em> a way! <a href="https://rmarkdown.rstudio.com/flexdashboard/shiny.html"><strong>flexdashboard</strong>’s integration with Shiny</a> makes it possible!</p>
<p>Here&rsquo;s a minimal working example of feeding data from a Google Sheet into a Shiny-based flexdashboard. It has to be hosted on a Shiny server somewhere (like <a href="https://www.shinyapps.io/">shinyapps.io</a> or on your own server), but you shouldn&rsquo;t have to reknit ever again!</p>
<h2 id="step-1-create-a-google-sheet">Step 1: Create a Google Sheet</h2>
<p>Go to Google Drive, create a new spreadsheet, and put this data in it:</p>





<table class="pure-table pure-table-horizontal">
<thead>
<tr>
<th style="text-align:center">Category</th>
<th style="text-align:center">Count</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">A</td>
<td style="text-align:center">4</td>
</tr>
<tr>
<td style="text-align:center">B</td>
<td style="text-align:center">3</td>
</tr>
<tr>
<td style="text-align:center">C</td>
<td style="text-align:center">8</td>
</tr>
<tr>
<td style="text-align:center">D</td>
<td style="text-align:center">2</td>
</tr>
</tbody>
</table>


<p>You can keep it private, but then you have to deal with OAuth tokens to get it to work with a Shiny server, so it&rsquo;s easiest here to make it publicly accessible. If you want to work with private data, check the <a href="https://googlesheets4.tidyverse.org/#auth"><strong>googlesheets4</strong> documentation on authentication</a>. Click on the &ldquo;Share&rdquo; button in the top right corner and make the document accessible via a link. You should also make the sheet public by going to File &gt; Publish to the web and publish as a CSV. You can also just use <a href="https://docs.google.com/spreadsheets/d/1RKNn84xVLUanhGyX8DPvDSd8zt4GX_eBmK2ZX2nf0BI/edit">this sheet here</a> if you don&rsquo;t want to create your own (but this is read only and you won&rsquo;t be able to edit it and see your changes live).</p>
<h2 id="step-2-build-a-static-dashboard">Step 2: Build a static dashboard</h2>
<p>We&rsquo;ll make a barebones dashboard with a couple big numbers at the top showing a count of categories and the sum of the category counts, and an interactive bar chart at the bottom showing the counts in each category. Check the fantastic documentation for <a href="https://rmarkdown.rstudio.com/flexdashboard/"><strong>flexdashboard</strong></a> for more details and examples.</p>
<p>Save this as an R Markdown file and knit it—the resulting HTML file is a complete self-contained dashboard.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">---
title: &#34;Example dashboard with static data from Google&#34;
output:
  flexdashboard::flex_dashboard:
    orientation: rows
    theme: yeti
---


```{r setup, include=FALSE}
library(tidyverse)
library(googlesheets4)
library(flexdashboard)
library(plotly)

# Make googlesheets4 not try to authenticate, since we&#39;re using a public sheet
sheets_deauth()
```

```{r get-data, message=FALSE, include=FALSE}
# The 1RKNn84xVLUanhGyX8DPvDSd8zt4GX_eBmK2ZX2nf0BI comes from the shared link
# URL from Google Sheets. You can also refer to sheets by name if you&#39;re
# authenticated into your account. See the googlesheets4 documentation for more
# details
remote_data &lt;- read_sheet(&#34;1RKNn84xVLUanhGyX8DPvDSd8zt4GX_eBmK2ZX2nf0BI&#34;)
```

## Row

### Categories {.value-box}

```{r}
# Find the number of unique categories
n_categories &lt;- remote_data %&gt;% distinct(Category) %&gt;% nrow()

# Show the number in a special valueBox (note the {.value-box} CSS class
# above—that applies the CSS class to the HTML output and makes it render
# correctly)
valueBox(value = n_categories, icon = &#34;fas fa-users&#34;)
```

### Total {.value-box}

```{r}
# Get a total of all the counts
total &lt;- sum(remote_data$Count)

# Show the number in a valueBox
valueBox(value = total, icon = &#34;fas fa-cubes&#34;)
```

## Row

###

```{r}
# Make a basic column plot
my_plot &lt;- ggplot(remote_data, aes(x = Category, y = Count)) +
  geom_col(aes(text = Count)) +
  theme_minimal()

# Show the plot with plotly
ggplotly(my_plot, tooltip = &#34;text&#34;)
```
</code></pre></div><h2 id="step-3-make-static-dashboard-dynamic">Step 3: Make static dashboard dynamic</h2>
<p>The only problem with this dashboard is that it&rsquo;s now the same every time you visit it. If you update the data in the Google Sheet, those changes won&rsquo;t be reflected in the dashboard unless you reknit the document.</p>
<p>We can make the dashboard dynamic with some basic shinyfication: we can put the data reading into a function that gets rerun when the page is reloaded, and we can put <code>valueBox()</code> and <code>ggplotly()</code> inside functions that connect them to the more dynamic data. This only requires a few changes—here&rsquo;s the same static dashboard with the Shiny bits added.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">---
title: &#34;Example dashboard with dynamic data from Google&#34;
output:
  flexdashboard::flex_dashboard:
    orientation: rows
runtime: shiny  # Make this use a Shiny backend
---


```{r setup, include=FALSE}
library(tidyverse)
library(googlesheets4)
library(flexdashboard)
library(plotly)

# Make googlesheets4 not try to authenticate, since we&#39;re using a public sheet
sheets_deauth()
```

```{r get-data, message=FALSE, include=FALSE}
# Create a function that reads the data from Google. I&#39;ve seen other examples
# that make this a reactive(), but I don&#39;t really know what that is since I
# rarely use Shiny :shrug:
#
# I&#39;m also not completely sold that this is the right approach, since this feels
# kind of roundabout (create a function, run the function), but it doesn&#39;t work
# if you just do remote_data &lt;- read_sheet(). Also :shrug: for now.
#
# ALSO flexdashboard can use a special global chunk to speed up expensive data
# loading (https://rmarkdown.rstudio.com/flexdashboard/shiny.html#loading_data),
# which I assume also includes loading data remotely from Google, but if you
# name this chunk global, the dynamic data loading stops working. Once again,
# big :shrug:.
load_remote_data &lt;- function() {
  read_sheet(&#34;1RKNn84xVLUanhGyX8DPvDSd8zt4GX_eBmK2ZX2nf0BI&#34;)
}

remote_data &lt;- load_remote_data()
```

## Row

### Categories {.value-box}

```{r}
n_categories &lt;- remote_data %&gt;% distinct(Category) %&gt;% nrow()

# Put valueBox() inside renderValueBox({})
renderValueBox({
  valueBox(value = n_categories, icon = &#34;fas fa-users&#34;)
})
```


### Total {.value-box}

```{r}
total &lt;- sum(remote_data$Count)

# Put valueBox() inside renderValueBox({})
renderValueBox({
  valueBox(value = total, icon = &#34;fas fa-cubes&#34;)
})
```

## Row

###

```{r}
my_plot &lt;- ggplot(remote_data, aes(x = Category, y = Count)) +
  geom_col(aes(text = Count)) +
  theme_minimal()

# Put ggplotly() inside renderPlotly({})
renderPlotly({
  ggplotly(my_plot, tooltip = &#34;text&#34;)
})
```
</code></pre></div><h2 id="step-4-check-the-dynamicness">Step 4: Check the dynamicness</h2>
<p>Edit the Google Sheet, refresh the Shiny app, and you should see everything change in real time!</p>
<h2 id="step-5-publish-somewhere">Step 5: Publish somewhere</h2>
<p>The easiest way to publish the Shiny-based dashboard is to click on the &ldquo;Publish&rdquo; menu in the top right corner of the RStudio preview window and then go through the menus to publish the document at shinyapps.io. <a href="https://andrewheiss.shinyapps.io/dynamic-flexdashboard/">Here&rsquo;s mine.</a></p>
<p><img src="shiny.png" alt="flexdashboard-based Shiny app on shinyapps.io"></p>
<hr>
<p>And that&rsquo;s it! An R Markdown-based flexdashboard that dynamically loads data from a Google Sheet. There are probably better ways to load the data (like somehow using the <code>global</code> chunk?), but this works well enough!</p>

    
        <footer>
            <div class="tags">
    <i class="fas fa-tags" aria-hidden="true"></i>&ensp;
    <a href="/blog/tags/rmarkdown/">rmarkdown</a>
    <span class="separator">•</span>
    <a href="/blog/tags/shiny/">shiny</a>
    <span class="separator">•</span>
    <a href="/blog/tags/r/">r</a>
    <span class="separator">•</span>
    <a href="/blog/tags/google-sheets/">google sheets</a></div>

        </footer>

        <div id="comments">
            <div id="disqus_thread"></div>
            <script type="text/javascript">
                 
                var disqus_shortname = 'andrewheisscom';
                var disqus_title = document.title;
                var disqus_url = 'https:\/\/www.shagunjhaver.com\/blog\/2020\/01\/01\/flexdashboard-dynamic-data\/';

                 
                (function () {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
                    Disqus.</a></noscript>
        </div>
    </article>
</section>

  

        </div> 
    </div> 
    
    <div id="footer">
        <footer>
    <ul class="links">
        <li>
            <a href="mailto:shagun.jhaver@rutgers.edu" aria-label="E-mail"   >
                <i class="fa fa-envelope" aria-hidden="true"></i>
            </a>
        </li>
        <li>
            <a href="https://medium.com/@shagunjhaver" aria-label="Medium"   >
                <i class="fab fa-medium" aria-hidden="true"></i>
            </a>
        </li>
        <li>
            <a href="https://scholar.google.com/citations?user=OgtKT6UAAAAJ" aria-label="Google Scholar"   >
                <i class="ai ai-google-scholar" aria-hidden="true"></i>
            </a>
        </li>
        <li>
            <a href="https://dl.acm.org/author_page.cfm?id=99658987207" aria-label="ACM Digital Library"   >
                <i class="ai ai-acmdl-square" aria-hidden="true"></i>
            </a>
        </li>
        <li>
            <a href="https://github.com/shaguniitb" aria-label="GitHub"   >
                <i class="fab fa-github" aria-hidden="true"></i>
            </a>
        </li>
        <li>
            <a href="https://twitter.com/shagunjhaver" aria-label="Twitter"   >
                <i class="fab fa-twitter" aria-hidden="true"></i>
            </a>
        </li>
        <li>
            <a href="https://www.facebook.com/shagun.jhaver" aria-label="Facebook"   >
                <i class="fab fa-facebook" aria-hidden="true"></i>
            </a>
        </li>
        <li>
            <a href="https://www.linkedin.com/in/shagun-jhaver/" aria-label="LinkedIn"   >
                <i class="fab fa-linkedin" aria-hidden="true"></i>
            </a>
        </li>
    </ul>

    <p class="colophon"> <i class="fas fa-map-marker-alt"></i> New Brunswick, NJ </p>
    <p class="colophon">ORCID iD: <a href="https://orcid.org/0000-0002-6728-7101">0000-0002-6728-7101</a></p>

   <p class="colophon">
    This site is a derivative of <a href="https://github.com/andrewheiss/ath-hugo">ath-hugo</a> by Andrew Heiss, used under CC <a href="https://creativecommons.org/licenses/by-sa/4.0/legalcode">4.0</a>.
   </p>


    <p class="colophon"><a href="https://github.com/shaguniitb/ath-hugo">Code for site</a></p>
</footer>

    </div>

</body>

</html>
